# Parallel Work Context

## Task
Fix InteractionResponse parsing when store=false (missing id field) - Issue #210

## Branch Info
- **Branch:** issue-210-optional-id
- **Base:** main
- **Created:** 2025-12-29

## Related
- Issue #210: InteractionResponse fails to parse when store=false (missing id field)

## Context from Parent Session

### Problem
When using `.with_store(false)` on an interaction (especially image generation), the API response lacks an `id` field, causing JSON deserialization to fail.

Error:
```
JSON deserialization error: Failed to parse InteractionResponse from create:
missing field `id` at line 1 column 1919858
```

### Solution
Make `id` field optional in `InteractionResponse`:

```rust
#[serde(skip_serializing_if = "Option::is_none")]
pub id: Option<String>,
```

### Key Files
- `genai-client/src/models/interactions/response.rs:331` - InteractionResponse struct
- Search for `.id` usages that need updating

### Implementation Checklist
- [ ] Update `InteractionResponse.id` to `Option<String>`
- [ ] Add `#[serde(skip_serializing_if = "Option::is_none")]` attribute
- [ ] Search for `.id` usages and update to handle `Option`
- [ ] Add unit test with mock response missing `id` field
- [ ] Update any relevant documentation

## Instructions
Follow standard workflow. This is a breaking change (Option<String> vs String) but aligns with the versioning philosophy in CLAUDE.md - prefer clean breaks.

---
**Session Start:** Read this file for context, then begin work.
